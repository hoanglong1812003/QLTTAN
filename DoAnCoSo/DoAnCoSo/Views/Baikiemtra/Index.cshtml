@model IEnumerable<DoAnCoSo.Data.Baikiemtra>

@{
    ViewData["Title"] = "Danh sách bài kiểm tra";
}

<h1 class="my-4">Bài kiểm tra</h1>
<a class="btn btn-primary mb-3" asp-controller="Home" asp-action="Index"><i class="fas fa-home"></i> Quay về trang chủ</a>
<div class="mb-3">
    <a class="btn btn-primary" asp-action="Create">Tạo bài kiểm tra</a>
</div>

<table class="table table-striped table-bordered">
    <thead class="thead-dark">
        <tr>
            <th>@Html.DisplayNameFor(model => model.Tenbaikt)</th>
            <th>@Html.DisplayNameFor(model => model.Ngaykt)</th>
            <th>@Html.DisplayNameFor(model => model.Tgbatdau)</th>
            <th>@Html.DisplayNameFor(model => model.Tgketthuc)</th>
            <th>@Html.DisplayNameFor(model => model.Ketqua)</th>
            <th>@Html.DisplayNameFor(model => model.Danhgia)</th>
            <th>@Html.DisplayNameFor(model => model.MagvNavigation)</th>
            <th>@Html.DisplayNameFor(model => model.MahvNavigation)</th>
            <th>File</th> <!-- Add this column for file actions -->
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@Html.DisplayFor(modelItem => item.Tenbaikt)</td>
                <td>@Html.DisplayFor(modelItem => item.Ngaykt)</td>
                <td>@Html.DisplayFor(modelItem => item.Tgbatdau)</td>
                <td>@Html.DisplayFor(modelItem => item.Tgketthuc)</td>
                <td>@Html.DisplayFor(modelItem => item.Ketqua)</td>
                <td>@Html.DisplayFor(modelItem => item.Danhgia)</td>
                <td>@Html.DisplayFor(modelItem => item.MagvNavigation.Magv)</td>
                <td>@Html.DisplayFor(modelItem => item.MahvNavigation.Mahv)</td>
                <td>
                    <!-- Upload file form -->
                    <form asp-action="UploadWordFile" method="post" enctype="multipart/form-data" style="display:inline;">
                        <input type="file" name="file" style="display:inline-block;" />
                        <input type="hidden" name="id" value="@item.Mabaikt" />
                        <button type="submit" class="btn btn-sm btn-primary">Upload</button>
                    </form>
                    @if (!string.IsNullOrEmpty(item.FilePath))
                    {
                        <a href="@item.FilePath" class="btn btn-sm btn-success" download>Tải về</a>
                    }
                </td>
                <td>
                    <a class="btn btn-sm btn-info" asp-action="Edit" asp-route-id="@item.Mabaikt">Chấm bài</a>
                    <a class="btn btn-sm btn-secondary" asp-action="Details" asp-route-id="@item.Mabaikt">Chi tiết</a>
                    <a class="btn btn-sm btn-danger" asp-action="Delete" asp-route-id="@item.Mabaikt">Xóa</a>
                </td>
            </tr>
        }
    </tbody>
</table>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
}
